{"version":3,"sources":["../../../src/app/content/device-activity-page/DeviceActivityPage.tsx"],"names":["React","AccountServiceContext","TimeUtil","Bullseye","DataList","DataListItem","DataListItemRow","DataListCell","DataListItemCells","Grid","GridItem","Stack","StackItem","AmazonIcon","ChromeIcon","EdgeIcon","FirefoxIcon","GlobeIcon","InternetExplorerIcon","OperaIcon","SafariIcon","YandexInternationalIcon","Msg","ContinueCancelModal","KeycloakContext","ContentPage","ContentAlert","DeviceActivityPage","Component","constructor","props","context","keycloakService","doDelete","then","logout","device","session","id","fetchDevices","success","browser","os","state","devices","doGet","response","console","log","moveCurrentToTop","data","setState","currentDevice","forEach","index","current","splice","unshift","sessions","currentSession","time","format","elementId","item","substring","findBrowserIcon","browserName","toLowerCase","includes","startsWith","findOS","localize","findOSVersion","osVersion","makeClientsString","clients","clientsString","client","clientName","hasOwnProperty","undefined","clientId","length","isShowSignOutAll","render","bind","keycloak","signOutAll","map","deviceIndex","sessionIndex","ipAddress","lastAccess","started","expires","signOutSession"],"mappings":"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","sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc. and/or its affiliates.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as React from 'react';\n\nimport {HttpResponse} from '../../account-service/account.service';\nimport { AccountServiceContext } from '../../account-service/AccountServiceContext';\nimport TimeUtil from '../../util/TimeUtil';\n\nimport {\n  Bullseye,\n  DataList,\n  DataListItem,\n  DataListItemRow,\n  DataListCell,\n  DataListItemCells,\n  Grid,\n  GridItem,\n  Stack,\n  StackItem\n} from '@patternfly/react-core';\n\nimport {\n        AmazonIcon,\n        ChromeIcon,\n        EdgeIcon,\n        FirefoxIcon,\n        GlobeIcon,\n        InternetExplorerIcon,\n        OperaIcon,\n        SafariIcon,\n        YandexInternationalIcon,\n} from '@patternfly/react-icons';\n\nimport {Msg} from '../../widgets/Msg';\nimport {ContinueCancelModal} from '../../widgets/ContinueCancelModal';\nimport { KeycloakService } from '../../keycloak-service/keycloak.service';\nimport { KeycloakContext } from '../../keycloak-service/KeycloakContext';\n\nimport {ContentPage} from '../ContentPage';\nimport { ContentAlert } from '../ContentAlert';\n\nexport interface DeviceActivityPageProps {\n}\n\nexport interface DeviceActivityPageState {\n  devices: Device[];\n}\n\ninterface Device {\n  browser: string;\n  current: boolean;\n  device: string;\n  ipAddress: string;\n  lastAccess: number;\n  mobile: boolean;\n  os: string;\n  osVersion: string;\n  sessions: Session[];\n}\n\ninterface Session {\n  browser: string;\n  current: boolean;\n  clients: Client[];\n  expires: number;\n  id: string;\n  ipAddress: string;\n  lastAccess: number;\n  started: number;\n}\n\ninterface Client {\n  clientId: string;\n  clientName: string;\n}\n\n/**\n * @author Stan Silvert ssilvert@redhat.com (C) 2019 Red Hat Inc.\n */\nexport class DeviceActivityPage extends React.Component<DeviceActivityPageProps, DeviceActivityPageState> {\n    static contextType = AccountServiceContext;\n    context: React.ContextType<typeof AccountServiceContext>;\n\n    public constructor(props: DeviceActivityPageProps, context: React.ContextType<typeof AccountServiceContext>) {\n        super(props);\n        this.context = context;\n\n        this.state = {\n          devices: []\n        };\n\n        this.fetchDevices();\n    }\n\n    private signOutAll = (keycloakService: KeycloakService) => {\n      this.context!.doDelete(\"/sessions\")\n        .then( () => {\n          keycloakService.logout();\n        });\n    }\n\n    private signOutSession = (device: Device, session: Session) => {\n      this.context!.doDelete(\"/sessions/\" + session.id)\n          .then (() => {\n            this.fetchDevices();\n            ContentAlert.success('signedOutSession', [session.browser, device.os]);\n          });\n    }\n\n    private fetchDevices(): void {\n      this.context!.doGet<Device[]>(\"/sessions/devices\")\n          .then((response: HttpResponse<Device[]>) => {\n            console.log({response});\n\n            let devices: Device[] = this.moveCurrentToTop(response.data as Device[]);\n\n            this.setState({\n              devices: devices\n            });\n\n          });\n    }\n\n    // current device and session should display at the top of their respective lists\n    private moveCurrentToTop(devices: Device[]): Device[] {\n      let currentDevice: Device = devices[0];\n\n      devices.forEach((device: Device, index: number) => {\n        if (device.current) {\n          currentDevice = device;\n          devices.splice(index, 1);\n          devices.unshift(device);\n        }\n      });\n\n      currentDevice.sessions.forEach((session: Session, index: number) => {\n        if (session.current) {\n          const currentSession: Session[] = currentDevice.sessions.splice(index, 1);\n          currentDevice.sessions.unshift(currentSession[0]);\n        }\n      });\n\n      return devices;\n    }\n\n    private time(time: number): string {\n      return TimeUtil.format(time * 1000);\n    }\n\n    private elementId(item: string, session: Session): string {\n        return `session-${session.id.substring(0,7)}-${item}`;\n    }\n\n    private findBrowserIcon(session: Session): React.ReactNode {\n      const browserName: string = session.browser.toLowerCase();\n      if (browserName.includes(\"chrom\")) return (<ChromeIcon id={this.elementId('icon-chrome', session)} size='lg'/>); // chrome or chromium\n      if (browserName.includes(\"firefox\")) return (<FirefoxIcon id={this.elementId('icon-firefox', session)} size='lg'/>);\n      if (browserName.includes(\"edge\")) return (<EdgeIcon id={this.elementId('icon-edge', session)} size='lg'/>);\n      if (browserName.startsWith(\"ie/\")) return (<InternetExplorerIcon id={this.elementId('icon-ie', session)} size='lg'/>);\n      if (browserName.includes(\"safari\")) return (<SafariIcon id={this.elementId('icon-safari', session)} size='lg'/>);\n      if (browserName.includes(\"opera\")) return (<OperaIcon id={this.elementId('icon-opera', session)} size='lg'/>);\n      if (browserName.includes(\"yandex\")) return (<YandexInternationalIcon id={this.elementId('icon-yandex', session)} size='lg'/>);\n      if (browserName.includes(\"amazon\")) return (<AmazonIcon id={this.elementId('icon-amazon', session)} size='lg'/>);\n\n      return (<GlobeIcon id={this.elementId('icon-default', session)} size='lg'/>);\n    }\n\n    private findOS(device: Device): string {\n      if (device.os.toLowerCase().includes('unknown')) return Msg.localize('unknownOperatingSystem');\n\n      return device.os;\n    }\n\n    private findOSVersion(device: Device): string {\n      if (device.osVersion.toLowerCase().includes('unknown')) return '';\n\n      return device.osVersion;\n    }\n\n    private makeClientsString(clients: Client[]): string {\n      let clientsString = \"\";\n      clients.forEach( (client: Client, index: number) => {\n        let clientName: string;\n        if (client.hasOwnProperty('clientName') && (client.clientName !== undefined) && (client.clientName !== '')) {\n          clientName = Msg.localize(client.clientName);\n        } else {\n          clientName = client.clientId;\n        }\n\n        clientsString += clientName;\n\n        if (clients.length > index + 1) clientsString += ', ';\n      })\n\n      return clientsString;\n    }\n\n    private isShowSignOutAll(devices: Device[]): boolean {\n      if (devices.length === 0) return false;\n      if (devices.length > 1) return true;\n      if (devices[0].sessions.length > 1) return true;\n\n      return false;\n    }\n\n    public render(): React.ReactNode {\n\n      return (\n        <ContentPage title=\"device-activity\" onRefresh={this.fetchDevices.bind(this)}>\n          <Stack gutter=\"md\">\n            <StackItem isFilled>\n              <DataList aria-label={Msg.localize('signedInDevices')}>\n                  <DataListItem key=\"SignedInDevicesHeader\" aria-labelledby=\"signedInDevicesTitle\" isExpanded={false}>\n                      <DataListItemRow>\n                          <DataListItemCells\n                              dataListCells={[\n                                <DataListCell key='signedInDevicesTitle' width={4}>\n                                  <div id=\"signedInDevicesTitle\" className=\"pf-c-content\">\n                                      <h2><Msg msgKey=\"signedInDevices\"/></h2>\n                                      <p>\n                                          <Msg msgKey=\"signedInDevicesExplanation\"/>\n                                      </p>\n                                  </div>\n                                </DataListCell>,\n                                <KeycloakContext.Consumer>\n                                { (keycloak: KeycloakService) => (\n                                  <DataListCell key='signOutAllButton' width={1}>\n                                    {this.isShowSignOutAll(this.state.devices) &&\n                                      <ContinueCancelModal buttonTitle='signOutAllDevices'\n                                                    buttonId='sign-out-all'\n                                                    modalTitle='signOutAllDevices'\n                                                    modalMessage='signOutAllDevicesWarning'\n                                                    onContinue={() => this.signOutAll(keycloak)}\n                                      />\n                                    }\n                                  </DataListCell>\n                                )}\n                                </KeycloakContext.Consumer>\n                              ]}\n                          />\n                      </DataListItemRow>\n                  </DataListItem>\n\n                  <DataListItem aria-labelledby='sessions'>\n                  <DataListItemRow>\n                    <Grid gutter='sm'>\n                      <GridItem span={12} /> {/* <-- top spacing */}\n                      {this.state.devices.map((device: Device, deviceIndex: number) => {\n                        return (\n                          <React.Fragment>\n                            {device.sessions.map((session: Session, sessionIndex: number) => {\n                              return (\n                                <React.Fragment key={'device-' + deviceIndex + '-session-' + sessionIndex}>\n\n                                  <GridItem md={3}>\n                                    <Stack>\n                                      <StackItem isFilled={false}>\n                                        <Bullseye>{this.findBrowserIcon(session)}</Bullseye>\n                                      </StackItem>\n                                      <StackItem isFilled={false}>\n                                        <Bullseye id={this.elementId('ip', session)}>{session.ipAddress}</Bullseye>\n                                      </StackItem>\n                                      {session.current &&\n                                        <StackItem isFilled={false}>\n                                          <Bullseye id={this.elementId('current-badge', session)}><strong className='pf-c-badge pf-m-read'><Msg msgKey=\"currentSession\" /></strong></Bullseye>\n                                        </StackItem>\n                                      }\n                                    </Stack>\n                                  </GridItem>\n                                  <GridItem md={9}>\n                                  {!session.browser.toLowerCase().includes('unknown') &&\n                                    <p id={this.elementId('browser', session)}><strong>{session.browser} / {this.findOS(device)} {this.findOSVersion(device)}</strong></p>}\n                                    <p id={this.elementId('last-access', session)}><strong>{Msg.localize('lastAccessedOn')}</strong> {this.time(session.lastAccess)}</p>\n                                    <p id={this.elementId('clients', session)}><strong>{Msg.localize('clients')}</strong> {this.makeClientsString(session.clients)}</p>\n                                    <p id={this.elementId('started', session)}><strong>{Msg.localize('startedAt')}</strong> {this.time(session.started)}</p>\n                                    <p id={this.elementId('expires', session)}><strong>{Msg.localize('expiresAt')}</strong> {this.time(session.expires)}</p>\n                                    {!session.current &&\n                                      <ContinueCancelModal buttonTitle='doSignOut'\n                                        buttonId={this.elementId('sign-out', session)}\n                                        modalTitle='doSignOut'\n                                        buttonVariant='secondary'\n                                        modalMessage='signOutWarning'\n                                        onContinue={() => this.signOutSession(device, session)}\n                                      />\n                                    }\n\n                                  </GridItem>\n                                </React.Fragment>\n                              );\n\n                            })}\n                          </React.Fragment>\n                        )\n                      })}\n                      <GridItem span={12} /> {/* <-- bottom spacing */}\n                    </Grid>\n                  </DataListItemRow>\n                </DataListItem>\n              </DataList>\n            </StackItem>\n\n          </Stack>\n        </ContentPage>\n        );\n    }\n};"],"file":"DeviceActivityPage.js"}