{"version":3,"sources":["../../../src/app/content/my-resources-page/MyResourcesPage.tsx"],"names":["React","parse","Button","Level","LevelItem","Stack","StackItem","Tab","Tabs","TextInput","AccountServiceContext","ResourcesTable","ContentPage","Msg","SharedResourcesTable","Scope","constructor","name","displayName","toString","hasOwnProperty","MY_RESOURCES_TAB","SHARED_WITH_ME_TAB","MyResourcesPage","Component","props","context","scope","state","myResources","data","forEach","resource","fetchShareRequests","response","doGet","resources","pendingRequest","sharedWithMe","_id","shareRequests","username","scopes","forceUpdate","value","setState","nameFilter","fetchFilteredResources","fetchInitialResources","isSharedWithMeTab","fetchResources","nextUrl","prevUrl","event","tabIndex","activeTabKey","isModalOpen","hasNext","hasPrevious","first","max","params","url","extraParams","then","map","makeScopeObj","parseResourceResponse","fetchPending","fetchPermissionRequests","length","links","headers","get","undefined","parsed","next","prev","makeTab","eventKey","title","sharedResourcesTab","localize","handleFilterRequest","render","bind","handleTabClick","handlePreviousClick","handleFirstPageClick","handleNextClick","clearNextPrev","newMyResources"],"mappings":"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","sourcesContent":["/*\n * Copyright 2018 Red Hat, Inc. and/or its affiliates.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as React from 'react';\n\nimport parse from '../../util/ParseLink';\n\nimport { Button, Level, LevelItem, Stack, StackItem, Tab, Tabs, TextInput } from '@patternfly/react-core';\n\nimport {HttpResponse} from '../../account-service/account.service';\nimport {AccountServiceContext} from '../../account-service/AccountServiceContext';\n\nimport {ResourcesTable} from './ResourcesTable';\nimport {ContentPage} from '../ContentPage';\nimport {Msg} from '../../widgets/Msg';\nimport { SharedResourcesTable } from './SharedResourcesTable';\n\nexport interface MyResourcesPageProps {\n}\n\nexport interface MyResourcesPageState {\n    activeTabKey: number;\n    isModalOpen: boolean;\n    nameFilter: string;\n    myResources: PaginatedResources;\n    sharedWithMe: PaginatedResources;\n}\n\nexport interface Resource {\n    _id: string;\n    name: string;\n    client: Client;\n    scopes: Scope[];\n    uris: string[];\n    shareRequests: Permission[];\n}\n\nexport interface Client {\n    baseUrl: string;\n    clientId: string;\n    name?: string;\n}\n\nexport class Scope {\n    public constructor(public name: string, public displayName?: string) {}\n\n    public toString(): string {\n        if (this.hasOwnProperty('displayName') && (this.displayName)) {\n            return this.displayName;\n        } else {\n            return this.name;\n        }\n    }\n}\n\nexport interface PaginatedResources {\n    nextUrl: string;\n    prevUrl: string;\n    data: Resource[];\n}\n\nexport interface Permission {\n    email?: string;\n    firstName?: string;\n    lastName?: string;\n    scopes: Scope[] | string[];  // this should be Scope[] - fix API\n    username: string;\n}\n\nconst MY_RESOURCES_TAB = 0;\nconst SHARED_WITH_ME_TAB = 1;\n\nexport class MyResourcesPage extends React.Component<MyResourcesPageProps, MyResourcesPageState> {\n    static contextType = AccountServiceContext;\n    context: React.ContextType<typeof AccountServiceContext>;\n    private first = 0;\n    private max = 5;\n\n    public constructor(props: MyResourcesPageProps, context: React.ContextType<typeof AccountServiceContext>) {\n        super(props);\n        this.context = context;\n\n        this.state = {\n            activeTabKey: MY_RESOURCES_TAB,\n            nameFilter: '',\n            isModalOpen: false,\n            myResources: {nextUrl: '', prevUrl: '', data: []},\n            sharedWithMe: {nextUrl: '', prevUrl: '', data: []}\n        };\n\n        this.fetchInitialResources();\n    }\n\n    private isSharedWithMeTab(): boolean {\n        return this.state.activeTabKey === SHARED_WITH_ME_TAB;\n    }\n\n    private hasNext(): boolean {\n        if (this.isSharedWithMeTab()) {\n            return (this.state.sharedWithMe.nextUrl !== null) && (this.state.sharedWithMe.nextUrl !== '');\n        } else {\n            return (this.state.myResources.nextUrl !== null) && (this.state.myResources.nextUrl !== '');\n        }\n    }\n\n    private hasPrevious(): boolean {\n        if (this.isSharedWithMeTab()) {\n            return (this.state.sharedWithMe.prevUrl !== null) && (this.state.sharedWithMe.prevUrl !== '');\n        } else {\n            return (this.state.myResources.prevUrl !== null) && (this.state.myResources.prevUrl !== '');\n        }\n    }\n\n    private fetchInitialResources(): void {\n        if (this.isSharedWithMeTab()) {\n            this.fetchResources(\"/resources/shared-with-me\");\n        } else {\n            this.fetchResources(\"/resources\", {first: this.first, max: this.max});\n        }\n    }\n\n    private fetchFilteredResources(params: Record<string, string|number>): void {\n        if (this.isSharedWithMeTab()) {\n            this.fetchResources(\"/resources/shared-with-me\", params);\n        } else {\n            this.fetchResources(\"/resources\", {...params, first: this.first, max: this.max});\n        }\n    }\n\n    private fetchResources(url: string, extraParams?: Record<string, string|number>): void {\n        this.context!.doGet<Resource[]>(url, {params: extraParams})\n            .then((response: HttpResponse<Resource[]>) => {\n                const resources: Resource[] = response.data || [];\n                resources.forEach((resource: Resource) => resource.shareRequests = []);\n\n                // serialize the Scope objects from JSON so that toString() will work.\n                resources.forEach((resource: Resource) => resource.scopes = resource.scopes.map(this.makeScopeObj));\n\n                if (this.isSharedWithMeTab()) {\n                    this.setState({sharedWithMe: this.parseResourceResponse(response)}, this.fetchPending);\n                } else {\n                    this.setState({myResources: this.parseResourceResponse(response)}, this.fetchPermissionRequests);\n                }\n            });\n    }\n\n    private makeScopeObj = (scope: Scope): Scope => {\n        return new Scope(scope.name, scope.displayName);\n    }\n\n    private fetchPermissionRequests = () => {\n        this.state.myResources.data.forEach((resource: Resource) => {\n            this.fetchShareRequests(resource);\n        });\n    }\n\n    private fetchShareRequests(resource: Resource): void {\n        this.context!.doGet('/resources/' + resource._id + '/permissions/requests')\n            .then((response: HttpResponse<Permission[]>) => {\n                resource.shareRequests = response.data || [];\n                if (resource.shareRequests.length > 0) {\n                    this.forceUpdate();\n                }\n            });\n    }\n\n    private fetchPending = async () => {\n        const response: HttpResponse<Resource[]> = await this.context!.doGet(`/resources/pending-requests`);\n        const resources: Resource[] = response.data || [];\n        resources.forEach((pendingRequest: Resource) => {\n            this.state.sharedWithMe.data.forEach(resource => {\n                if (resource._id === pendingRequest._id) {\n                    resource.shareRequests = [{username: 'me', scopes: pendingRequest.scopes}]\n                    this.forceUpdate();\n                }\n            });\n        });\n    }\n\n    private parseResourceResponse(response: HttpResponse<Resource[]>): PaginatedResources {\n        const links: string | undefined = response.headers.get('link') || undefined;\n        const parsed = parse(links);\n\n        let next = '';\n        let prev = '';\n\n        if (parsed !== null) {\n            if (parsed.next) next = parsed.next;\n            if (parsed.prev) prev = parsed.prev;\n        }\n\n        const resources: Resource[] = response.data || [];\n\n        return {nextUrl: next, prevUrl: prev, data: resources};\n    }\n\n    private makeTab(eventKey: number, title: string, resources: PaginatedResources, sharedResourcesTab: boolean): React.ReactNode {\n        return (\n            <Tab id={title} eventKey={eventKey} title={Msg.localize(title)}>\n                <Stack gutter=\"md\">\n                    <StackItem isFilled><span/></StackItem>\n                    <StackItem isFilled>\n                        <Level gutter='md'>\n                            <LevelItem>\n                                <TextInput value={this.state.nameFilter} onChange={this.handleFilterRequest} id={'filter-' + title} type=\"text\" placeholder={Msg.localize('filterByName')} />\n                            </LevelItem>\n                        </Level>\n                    </StackItem>\n                    <StackItem isFilled>\n                        {!sharedResourcesTab && <ResourcesTable resources={resources}/>}\n                        {sharedResourcesTab && <SharedResourcesTable resources={resources}/>}\n                    </StackItem>\n                </Stack>\n            </Tab>\n        )\n    }\n\n    public render(): React.ReactNode {\n        return (\n            <ContentPage title=\"resources\" onRefresh={this.fetchInitialResources.bind(this)}>\n                <Tabs isFilled activeKey={this.state.activeTabKey} onSelect={this.handleTabClick}>\n                    {this.makeTab(0, 'myResources', this.state.myResources, false)}\n                    {this.makeTab(1, 'sharedwithMe', this.state.sharedWithMe, true)}\n                </Tabs>\n\n                <Level gutter='md'>\n                    <LevelItem>\n                        {this.hasPrevious() && <Button onClick={this.handlePreviousClick}>&lt;<Msg msgKey='previousPage'/></Button>}\n                    </LevelItem>\n\n                    <LevelItem>\n                        {this.hasPrevious() && <Button onClick={this.handleFirstPageClick}><Msg msgKey='firstPage'/></Button>}\n                    </LevelItem>\n\n                    <LevelItem>\n                        {this.hasNext() && <Button onClick={this.handleNextClick}><Msg msgKey='nextPage'/>&gt;</Button>}\n                    </LevelItem>\n                </Level>\n            </ContentPage>\n        );\n    }\n\n    private handleFilterRequest = (value: string) => {\n        this.setState({nameFilter: value});\n        this.fetchFilteredResources({name: value});\n    }\n\n    private clearNextPrev(): void {\n        const newMyResources: PaginatedResources = this.state.myResources;\n        newMyResources.nextUrl = '';\n        newMyResources.prevUrl = '';\n        this.setState({myResources: newMyResources});\n    }\n\n    private handleFirstPageClick = () => {\n        this.fetchInitialResources();\n    }\n\n    private handleNextClick = () => {\n        if (this.isSharedWithMeTab()) {\n            this.fetchResources(this.state.sharedWithMe.nextUrl);\n        } else {\n            this.fetchResources(this.state.myResources.nextUrl);\n        }\n    }\n\n    private handlePreviousClick = () => {\n        if (this.isSharedWithMeTab()) {\n            this.fetchResources(this.state.sharedWithMe.prevUrl);\n        } else {\n            this.fetchResources(this.state.myResources.prevUrl);\n        }\n    }\n\n    private handleTabClick = (event: React.MouseEvent<HTMLInputElement>, tabIndex: number) => {\n        if (this.state.activeTabKey === tabIndex) return;\n\n        this.setState({\n            nameFilter: '',\n            activeTabKey: tabIndex\n        }, () => {this.fetchInitialResources()});\n    };\n};\n"],"file":"MyResourcesPage.js"}